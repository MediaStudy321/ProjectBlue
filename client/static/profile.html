<html>

<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Profile</title>
	<style>
		body {
			font-family: 'Times New Roman', Times, serif;
		}

		#boxloc {
			background-color: white;
			position: absolute;
			border: 5px solid black;
			right: 0%;
			top: 0%;
			bottom: 0%;
		}

		#shift {
			position: relative;
			left: 3%;
		}

		/*style*/
		.tab {
			overflow: hidden;
			border: 1px solid gray;
			background-color: white;
		}

		.tab button {
			background-color: inherit;
			float: left;
			border: 1px solid gray;
			outline: none;
			cursor: pointer;
			padding: 14px 16px;
			transition: 0.5s;
			font-size: 12;
		}

		.tab button:hover {
			background-color: gray;
		}

		.tab button.active {
			background-color: red;
		}

		.tabcontent {
			display: none;
			padding: 6px 12px;
			border: 1px solid grey;
			border-top: none;
		}

		.hidden {
			display: none;
		}

		.show {
			display: inline;
		}
	</style>
</head>

<body>

	<div id="boxloc">
		<div id="shift">
			<h1><a id="charname"></a> </h1>
			<h3> Class: <a id="class"></a></h3>
			<h3> Lv: <a id="lv"></a></h3>
			<h5> Exp: <a id="exp"></a></h5>
		</div>

		<div class="tab">
			<button class="tablinks" onclick="openProfile(event, 'Stats')">Stats</button>
			<button class="tablinks" onclick="openProfile(event, 'Skills & Talents')">Skills & Talents</button>
			<button class="tablinks" onclick="openProfile(event, 'Equipment')">Equipment</button>
			<button class="tablinks" onclick="openProfile(event, 'Inventory')">Inventory</button>
			<button class="tablinks" onclick="openProfile(event, 'Quest')">Quest</button>
		</div>

		<div id="Stats" class="tabcontent">
			<p>Health: <a id="hp">0</a> <button id="dhp" class="hidden">Roll For Stats</button></p>
			<p>Mana: <a id="mp">0</a> <button id="dmp" class="hidden">Roll For Stats</button></p>
			<p>Phy.Attack: <a id="pa">0</a> <button id="dpa" class="hidden">Roll For Stats</button></p>
			<p>Phy.Defense: <a id="pd">0</a> <button id="dpd" class="hidden">Roll For Stats</button></p>
			<p>Mag.Attack: <a id="ma">0</a> <button id="dma" class="hidden">Roll For Stats</button></p>
			<p>Mag.Defense: <a id="md">0</a> <button id="dmd" class="hidden">Roll For Stats</button></p>
			<p>Dexterity: <a id="d">0</a> <button id="dd" class="hidden">Roll For Stats</button></p>
			<p> </p>
			<p id="statsrolls"></p>
			<button id="free exp" class="hidden">free lv up</button>

		</div>

		<div id="Skills & Talents" class="tabcontent">
			<h5><a>Skills</a></h5>
			<br />
			<div id="skills"></div>
		</div>

		<div id="Equipment" class="tabcontent">
			<p>Weapon: <a id="weapon"></a></p>
			<p>Head: <a id="head"></a></p>
			<p>Armor: <a id="armor"></a></p>
			<p>Gloves: <a id="gloves"></a></p>
			<p>Pants: <a id="pants"></a></p>
			<p>Shoes: <a id="shoes"></a></p>

		</div>

		<div id="Inventory" class="tabcontent">
			<p>10 Gold Coins</p>
			<p>Beaten Up Backpack</p>
			<p>Small Canteen</p>
		</div>

		<div id="Quest" class="tabcontent">
			<p>Your party has tracked down Lord Superius to his underground lair, but a magic forcefield blocks its
				entrance. You must find a way to bring down the forcefield in order to retrieve the Eternal Stone.</p>
		</div>
	</div>


<script src="battle/skills.js"></script>
<script src="battle/gamestats.js"></script>
<script>
	//document.getElementById("charname").innerHTML = sessionStorage.getItem("UserName");
	document.getElementById("charname").innerHTML = player.name;
	var EXPLV = 0;
	var statsRoll = parseInt(sessionStorage.getItem("statroll"));

	/*stat dice*/
	var bhp = document.getElementById("dhp");
	var bmp = document.getElementById("dmp");
	var bpa = document.getElementById("dpa");
	var bpd = document.getElementById("dpd");
	var bma = document.getElementById("dma");
	var bmd = document.getElementById("dmd");
	var bd = document.getElementById("dd");
	/////

	var characterclass = sessionStorage.getItem("Class");

	/*rolling stats*/
	if (statsRoll != 0) {
		var Rhp = parseInt(sessionStorage.getItem("hp"));
		var Rmp = parseInt(sessionStorage.getItem("mp"));
		var Rpa = parseInt(sessionStorage.getItem("pa"));
		var Rpd = parseInt(sessionStorage.getItem("pd"));
		var Rma = parseInt(sessionStorage.getItem("ma"));
		var Rmd = parseInt(sessionStorage.getItem("md"));
		var Rd = parseInt(sessionStorage.getItem("d"));

		function hpdice() {
			var dice = [2, 3, 4];
			var roll = dice[Math.floor(Math.random() * dice.length)];
			return roll;
		}

		function statdice() {
			var dice = [1, 2, 3];
			var roll = dice[Math.floor(Math.random() * dice.length)];
			return roll;
		}

		bhp.onclick = function () {
			Rhp += hpdice();
			if (statsRoll > 0) {
				sessionStorage.setItem("hp", Rhp);
				statsRoll -= 1;
				getstats();
			}
		}
		bmp.onclick = function () {
			Rmp += statdice();
			if (statsRoll > 0) {
				sessionStorage.setItem("mp", Rmp);
				statsRoll -= 1;
				getstats();
			}
		}
		bpa.onclick = function () {
			Rpa += statdice();
			if (statsRoll > 0) {
				sessionStorage.setItem("pa", Rpa);
				statsRoll -= 1;
				getstats();
			}
		}
		bpd.onclick = function () {
			Rpd += statdice();
			if (statsRoll > 0) {
				sessionStorage.setItem("pd", Rpd);
				statsRoll -= 1;
				getstats();
			}
		}
		bma.onclick = function () {
			Rma += statdice();
			if (statsRoll > 0) {
				sessionStorage.setItem("ma", Rma);
				statsRoll -= 1;
				getstats();
			}
		}
		bmd.onclick = function () {
			Rmd += statdice();
			if (statsRoll > 0) {
				sessionStorage.setItem("md", Rmd);
				statsRoll -= 1;
				getstats();
			}
		}
		bd.onclick = function () {
			Rd += statdice();
			if (statsRoll > 0) {
				sessionStorage.setItem("d", Rd);
				statsRoll -= 1;
				getstats();
			}
		}
	}
	///

	/*tab functions*/
	function openProfile(evt, profileTab) {
		var i, tabcontent, tablinks;
		tabcontent = document.getElementsByClassName("tabcontent");
		for (i = 0; i < tabcontent.length; i++) {
			tabcontent[i].style.display = "none";
		}
		tablinks = document.getElementsByClassName("tablinks");
		for (i = 0; i < tablinks.length; i++) {
			tablinks[i].className = tablinks[i].className.replace(" active", "");
		}
		document.getElementById(profileTab).style.display = "block";
		evt.currentTarget.className += " active";
	}
	/*leveling up stuff*/
	function StatsUp() {
		var newHp = parseInt(sessionStorage.getItem("hp")) + 2;
		var newMp = parseInt(sessionStorage.getItem("mp")) + 2;
		var newPa = parseInt(sessionStorage.getItem("pa")) + 1;
		var newPd = parseInt(sessionStorage.getItem("pd")) + 1;
		var newMa = parseInt(sessionStorage.getItem("ma")) + 1;
		var newMd = parseInt(sessionStorage.getItem("md")) + 1;
		var newD = parseInt(sessionStorage.getItem("d")) + 1;

		sessionStorage.setItem("hp", newHp);
		sessionStorage.setItem("mp", newMp);
		sessionStorage.setItem("pa", newPa);
		sessionStorage.setItem("pd", newPd);
		sessionStorage.setItem("ma", newMa);
		sessionStorage.setItem("md", newMd);
		sessionStorage.setItem("d", newD);
	}

	function LvUp() {
		var NewLevel = parseInt(sessionStorage.getItem("Level"));
		var OldMaxExpCap = EXPLV;
		var NewExpSet = parseInt(sessionStorage.getItem("exp"));
		if (NewExpSet >= OldMaxExpCap) {
			NewExpSet -= OldMaxExpCap;
		}
		NewLevel = NewLevel + 1;
		statsRoll += 2;
		sessionStorage.setItem("Level", NewLevel);
		sessionStorage.setItem("exp", NewExpSet);
		StatsUp();
		getstats();
		window.location = window.location.href;

	}


	/*stat display */
	function getstats() {
		EXPLV = sessionStorage.getItem("classADV") * 10 + (sessionStorage.getItem("Level") * 15);
		document.getElementById("class").innerHTML = sessionStorage.getItem("Class");
		document.getElementById("lv").innerHTML = sessionStorage.getItem("Level");
		document.getElementById("exp").innerHTML = sessionStorage.getItem("exp") + "/" + EXPLV;
		document.getElementById("hp").innerHTML = sessionStorage.getItem("hp");
		document.getElementById("mp").innerHTML = sessionStorage.getItem("mp");
		document.getElementById("pa").innerHTML = sessionStorage.getItem("pa");
		document.getElementById("pd").innerHTML = sessionStorage.getItem("pd");
		document.getElementById("ma").innerHTML = sessionStorage.getItem("ma");
		document.getElementById("md").innerHTML = sessionStorage.getItem("md");
		document.getElementById("d").innerHTML = sessionStorage.getItem("d");
		if (statsRoll != 0) {
			document.getElementById("statsrolls").className = "show"
			document.getElementById("dhp").className = "show"
			document.getElementById("dmp").className = "show"
			document.getElementById("dpa").className = "show"
			document.getElementById("dpd").className = "show"
			document.getElementById("dma").className = "show"
			document.getElementById("dmd").className = "show"
			document.getElementById("dd").className = "show"
			document.getElementById("statsrolls").innerHTML = "Stats Rolls: " + statsRoll;
			sessionStorage.setItem("statroll", statsRoll);
		}
		else if (statsRoll == 0) {
			document.getElementById("statsrolls").className = "hidden"
			document.getElementById("dhp").className = "hidden"
			document.getElementById("dmp").className = "hidden"
			document.getElementById("dpa").className = "hidden"
			document.getElementById("dpd").className = "hidden"
			document.getElementById("dma").className = "hidden"
			document.getElementById("dmd").className = "hidden"
			document.getElementById("dd").className = "hidden"
			sessionStorage.setItem("statroll", statsRoll);
		}
		if (sessionStorage.getItem("exp") >= EXPLV && (sessionStorage.getItem("Level") != 20)) {
			LvUp();
		}
	}
	////////

	var EQweapon = "Hands";

	function loadEquipments() {
		if (sessionStorage.getItem("Weapon") == null || sessionStorage.getItem("Weapon") == "") {
			sessionStorage.setItem("Weapon", EQweapon);
		}
		else {
			EQweapon = (sessionStorage.getItem("Weapon"));
		}
		document.getElementById("weapon").innerHTML = EQweapon;
	}

	///// skills

	function loadskills(){
		var characterskills = [];
		if(characterclass == "Mage"){
			characterskills = mageskills;
		}
		else if(characterclass == "Warrior")
		{
			characterskills = warskills;
		}
		else if(characterclass == "Rouge")
		{
			characterskills = rouskills;
		}
		else if(characterclass == "Bard")
		{
			
		}
	}



	///
	/*dev Corner*/
	var expbt = document.getElementById("free exp");

	expbt.onclick = function () {
		var currentExp = parseInt(sessionStorage.getItem("exp"));
		var gainExp = currentExp + EXPLV;
		sessionStorage.setItem("exp", gainExp);
		getstats();
	}
	/**/
	getstats();
	loadEquipments();

</script>

</body>

</html>